import MapEditor from '../src/js/map';
describe('init', function () {
  beforeEach(function () {

    $('body').prepend('<div id="map" style="width: 100%; height: 500px;"></div>');
    window._map = new MapEditor('map', {
      center: [55.75, 37.62],
      zoom: 10,
      worldCopyJump: true,
      text: {
        intersection: "Пересечение границ запрещено"
      }
    });
  });
  afterEach(() => {
    $('body').html('');
    _map.remove();
  });

  it('check scripts are loaded', function () {
    expect(window.google).not.toBe(null);
    expect(window.google.maps).not.toBe(null);
    expect($.fn.tooltip).not.toBe(null);
    expect(L.version).not.toBe(null);
    expect(L.Google).not.toBe(null);
    expect(L.Control.Fullscreen).not.toBe(null);
    expect($('#map')[0]).not.toBe(null);
  });
  it('map is ok', function () {
    expect(_map instanceof L.Map).toBe(true);
  });
  it('expand control', function () {
    expect($('.leaflet-control-layers-expanded').length).toBe(0);
    _map._controlLayers._expand();
    expect($('.leaflet-control-layers-expanded').length).toBe(1);
  });
  it("check zoom", function() {
    expect(_map.getZoom()).toBe(10);
    _map.zoomIn(1);
    expect(_map.getZoom()).toBe(11);
    _map.zoomOut(1);
    expect(_map.getZoom()).toBe(10);
  });
});