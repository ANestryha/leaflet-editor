import MapEditor from '../src/js/map';
describe('create polygon', function () {
  beforeEach(function () {
    $('body').prepend('<div id="map" style="width: 100%; height: 500px;"></div>');

    window._map = new MapEditor('map', {
      allowIntersection: true,
      center: [55.75, 37.62],
      zoom: 9,
      worldCopyJump: true,
      text: {
        intersection: "Пересечение границ запрещено"
      }
    });
  });
  afterEach(() => {
    $('body').html('');
    _map.remove();
  });
  it('move mouse and click', function () {
    let k = 4;

    var latlng = _map.getCenter();

    latlng = {lat: latlng.lat - 0.04 * k, lng: latlng.lng};

    var latlng2 = $.extend(true, {}, latlng);
    latlng2.lat += 0.04 * k; latlng2.lng += 0.081 * k;

    var latlng3 = $.extend(true, {}, latlng2);
    latlng3.lat += 0.04 * k; latlng3.lng -= 0.081 * k;

    var latlng4 = $.extend(true, {}, latlng2);
    latlng4.lat += 0.02 * k; latlng4.lng -= 0.16 * k;

    _map.on('click', function () {
      console.log($('.leaflet-marker-icon').length);
    });
    _map.$.on('select_marker', function () {
      console.log($('.leaflet-marker-icon').length);
    });

    setPolygon(_map, [
      latlng, latlng2, latlng3, latlng4
    ]);
  });
});